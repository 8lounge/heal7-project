// ìš´ì„¸ ìº˜ë¦°ë” ë°ì´í„° ì‹œìŠ¤í…œ

export interface CalendarDate {
  date: Date;
  lunarDate: string;
  gapja: string;
  zodiac: string;
  element: string;
  sonEobNeunNal: boolean; // ì†ì—†ëŠ”ë‚ 
  gilil: boolean; // ê¸¸ì¼
  í‰ì¼: boolean; // í‰ì¼
  ì ˆê¸°: string | null;
  ìš´ì„¸ì ìˆ˜: number; // 1-5
  íŠ¹ì´ì‚¬í•­: string[];
}

export interface MonthlyFortune {
  month: number;
  year: number;
  bestDates: CalendarDate[];
  worstDates: CalendarDate[];
  importantDates: CalendarDate[];
  monthlyMessage: string;
}

// ì²œê°„ ë°ì´í„°
export const ì²œê°„ = ['ê°‘', 'ì„', 'ë³‘', 'ì •', 'ë¬´', 'ê¸°', 'ê²½', 'ì‹ ', 'ì„', 'ê³„'];
export const ì§€ì§€ = ['ì', 'ì¶•', 'ì¸', 'ë¬˜', 'ì§„', 'ì‚¬', 'ì˜¤', 'ë¯¸', 'ì‹ ', 'ìœ ', 'ìˆ ', 'í•´'];

// 12ì§€ì‹  ë™ë¬¼ ë§¤í•‘
export const ë ë™ë¬¼: Record<string, string> = {
  'ì': 'ì¥', 'ì¶•': 'ì†Œ', 'ì¸': 'í˜¸ë‘ì´', 'ë¬˜': 'í† ë¼', 
  'ì§„': 'ìš©', 'ì‚¬': 'ë±€', 'ì˜¤': 'ë§', 'ë¯¸': 'ì–‘',
  'ì‹ ': 'ì›ìˆ­ì´', 'ìœ ': 'ë‹­', 'ìˆ ': 'ê°œ', 'í•´': 'ë¼ì§€'
};

// ì˜¤í–‰ ë§¤í•‘
export const ì˜¤í–‰ë§¤í•‘: Record<string, string> = {
  'ê°‘': 'ëª©', 'ì„': 'ëª©', 'ë³‘': 'í™”', 'ì •': 'í™”', 'ë¬´': 'í† ',
  'ê¸°': 'í† ', 'ê²½': 'ê¸ˆ', 'ì‹ ': 'ê¸ˆ', 'ì„': 'ìˆ˜', 'ê³„': 'ìˆ˜'
};

// 60ê°‘ì ê³„ì‚° í•¨ìˆ˜ (ì „í†µ ëª…ë¦¬í•™ ê²€ì¦ëœ ê¸°ì¤€ ì‚¬ìš©)
export const get60ê°‘ì = (date: Date): string => {
  // ê¸°ì¤€ì¼: 1900ë…„ 1ì›” 1ì¼ = ê°‘ì§„ì¼ (ì „í†µ ëª…ë¦¬í•™ í‘œì¤€ ê¸°ì¤€ì )
  const ê¸°ì¤€ì¼ = new Date(1900, 0, 1); // 1900ë…„ 1ì›” 1ì¼ (monthëŠ” 0ë¶€í„° ì‹œì‘ì´ë¯€ë¡œ 0=1ì›”)
  const ê¸°ì¤€ê°‘ìì¸ë±ìŠ¤ = 40; // ê°‘ì§„ì˜ ì¸ë±ìŠ¤ (ê°‘=0*10 + ì§„=4*10 = 40)
  
  const ë‚ ì§œì°¨ì´ = Math.floor((date.getTime() - ê¸°ì¤€ì¼.getTime()) / (24 * 60 * 60 * 1000));
  let ê°‘ìì¸ë±ìŠ¤ = (ê¸°ì¤€ê°‘ìì¸ë±ìŠ¤ + ë‚ ì§œì°¨ì´) % 60;
  
  // ìŒìˆ˜ ë³´ì • (ê³¼ê±° ë‚ ì§œ ê³„ì‚°ì‹œ)
  if (ê°‘ìì¸ë±ìŠ¤ < 0) {
    ê°‘ìì¸ë±ìŠ¤ += 60;
  }
  
  const ì²œê°„ì¸ë±ìŠ¤ = ê°‘ìì¸ë±ìŠ¤ % 10;
  const ì§€ì§€ì¸ë±ìŠ¤ = ê°‘ìì¸ë±ìŠ¤ % 12;
  
  return ì²œê°„[ì²œê°„ì¸ë±ìŠ¤] + ì§€ì§€[ì§€ì§€ì¸ë±ìŠ¤];
};

// ê·¼ì‚¬ ìŒë ¥ ë³€í™˜ í•¨ìˆ˜ (ì •í™•ë„ ì œí•œì , KASI API ì‚¬ìš© ê¶Œì¥)
export const getìŒë ¥ë³€í™˜ = (date: Date): string => {
  // ê°„ë‹¨í•œ ê·¼ì‚¬ ê³„ì‚°: ì–‘ë ¥ì´ ìŒë ¥ë³´ë‹¤ í‰ê·  18-50ì¼ ì •ë„ ë¹ ë¦„
  // ì •í™•í•œ ê³„ì‚°ì„ ìœ„í•´ì„œëŠ” KASI API í•„ìš”
  
  const year = date.getFullYear();
  const month = date.getMonth() + 1;
  const day = date.getDate();
  
  // 2025ë…„ ê¸°ì¤€ ì£¼ìš” ìŒë ¥ ì ˆê¸°ì¼ (ê·¼ì‚¬ê°’)
  const ìŒë ¥ê·¼ì‚¬í‘œ = {
    2025: [
      // [ì–‘ë ¥ì›”, ì–‘ë ¥ì¼, ìŒë ¥ì›”, ìŒë ¥ì¼] í˜•íƒœì˜ ê¸°ì¤€ì ë“¤
      [1, 29, 1, 1],   // ì„¤ë‚ 
      [2, 12, 1, 15],  // ì •ì›”ëŒ€ë³´ë¦„  
      [2, 28, 2, 1],   // ìŒë ¥ 2ì›” 1ì¼
      [3, 14, 2, 15],  // ìŒë ¥ 2ì›” 15ì¼
      [3, 30, 3, 1],   // ìŒë ¥ 3ì›” 1ì¼
      [4, 13, 3, 15],  // ìŒë ¥ 3ì›” 15ì¼
      [4, 28, 4, 1],   // ìŒë ¥ 4ì›” 1ì¼
      [5, 12, 4, 15],  // ìŒë ¥ 4ì›” 15ì¼ (ë¶€ì²˜ë‹˜ì˜¤ì‹ ë‚ )
      [5, 27, 5, 1],   // ìŒë ¥ 5ì›” 1ì¼
      [6, 10, 5, 15],  // ìŒë ¥ 5ì›” 15ì¼
      [6, 25, 6, 1],   // ìŒë ¥ 6ì›” 1ì¼
      [7, 9, 6, 15],   // ìŒë ¥ 6ì›” 15ì¼
      [7, 24, 7, 1],   // ìŒë ¥ 7ì›” 1ì¼
      [8, 7, 7, 15],   // ìŒë ¥ 7ì›” 15ì¼ (ì¤‘ì›ì ˆ)
      [8, 22, 8, 1],   // ìŒë ¥ 8ì›” 1ì¼
      [9, 5, 8, 15],   // ìŒë ¥ 8ì›” 15ì¼ (ì¶”ì„)
      [9, 20, 9, 1],   // ìŒë ¥ 9ì›” 1ì¼
      [10, 4, 9, 15],  // ìŒë ¥ 9ì›” 15ì¼
      [10, 19, 10, 1], // ìŒë ¥ 10ì›” 1ì¼
      [11, 2, 10, 15], // ìŒë ¥ 10ì›” 15ì¼
      [11, 17, 11, 1], // ìŒë ¥ 11ì›” 1ì¼
      [12, 1, 11, 15], // ìŒë ¥ 11ì›” 15ì¼
      [12, 16, 12, 1], // ìŒë ¥ 12ì›” 1ì¼
      [12, 30, 12, 15] // ìŒë ¥ 12ì›” 15ì¼
    ]
  };
  
  const ê¸°ì¤€ì ë“¤ = ìŒë ¥ê·¼ì‚¬í‘œ[year];
  if (!ê¸°ì¤€ì ë“¤) {
    return `ìŒë ¥ ${month}ì›” ${day}ì¼ (ê·¼ì‚¬)`; // ê¸°ë³¸ê°’
  }
  
  // ê°€ì¥ ê°€ê¹Œìš´ ê¸°ì¤€ì  ì°¾ê¸°
  let ê°€ì¥ê°€ê¹Œìš´ê¸°ì¤€ = ê¸°ì¤€ì ë“¤[0];
  let ìµœì†Œì°¨ì´ = Math.abs((month - ê°€ì¥ê°€ê¹Œìš´ê¸°ì¤€[0]) * 31 + (day - ê°€ì¥ê°€ê¹Œìš´ê¸°ì¤€[1]));
  
  for (const ê¸°ì¤€ì  of ê¸°ì¤€ì ë“¤) {
    const ì°¨ì´ = Math.abs((month - ê¸°ì¤€ì [0]) * 31 + (day - ê¸°ì¤€ì [1]));
    if (ì°¨ì´ < ìµœì†Œì°¨ì´) {
      ìµœì†Œì°¨ì´ = ì°¨ì´;
      ê°€ì¥ê°€ê¹Œìš´ê¸°ì¤€ = ê¸°ì¤€ì ;
    }
  }
  
  // ê¸°ì¤€ì ìœ¼ë¡œë¶€í„° ìŒë ¥ ë‚ ì§œ ì¶”ì •
  const ì–‘ë ¥ê¸°ì¤€ì¼ = ê°€ì¥ê°€ê¹Œìš´ê¸°ì¤€[0] * 31 + ê°€ì¥ê°€ê¹Œìš´ê¸°ì¤€[1];
  const í˜„ì¬ì–‘ë ¥ì¼ = month * 31 + day;
  const ì¼ìˆ˜ì°¨ì´ = í˜„ì¬ì–‘ë ¥ì¼ - ì–‘ë ¥ê¸°ì¤€ì¼;
  
  let ìŒë ¥ì›” = ê°€ì¥ê°€ê¹Œìš´ê¸°ì¤€[2];
  let ìŒë ¥ì¼ = ê°€ì¥ê°€ê¹Œìš´ê¸°ì¤€[3] + ì¼ìˆ˜ì°¨ì´;
  
  // ì›” ê²½ê³„ ì²˜ë¦¬ (29ì¼/30ì¼ ê¸°ì¤€)
  while (ìŒë ¥ì¼ > 30) {
    ìŒë ¥ì¼ -= 29; // í‰ê·  ìŒë ¥ì›” ê¸¸ì´
    ìŒë ¥ì›”++;
  }
  while (ìŒë ¥ì¼ < 1) {
    ìŒë ¥ì¼ += 29;
    ìŒë ¥ì›”--;
  }
  
  // ì—°ë„ ê²½ê³„ ì²˜ë¦¬
  if (ìŒë ¥ì›” > 12) {
    ìŒë ¥ì›” = ìŒë ¥ì›” % 12 || 12;
  }
  if (ìŒë ¥ì›” < 1) {
    ìŒë ¥ì›” = 12 + ìŒë ¥ì›”;
  }
  
  return `ìŒë ¥ ${ìŒë ¥ì›”}ì›” ${ìŒë ¥ì¼}ì¼`;
};

// ì†ì—†ëŠ”ë‚  ê³„ì‚° (ë§¤ì›” 9ì¼, 10ì¼, 19ì¼, 20ì¼, 29ì¼, 30ì¼)
export const isì†ì—†ëŠ”ë‚  = (date: Date): boolean => {
  const day = date.getDate();
  return [9, 10, 19, 20, 29, 30].includes(day);
};

// ê¸¸ì¼/í‰ì¼ ê³„ì‚° (ë‹¨ìˆœ ê·œì¹™ ê¸°ë°˜)
export const getê¸¸í‰ = (gapja: string, date: Date): { ê¸¸ì¼: boolean; í‰ì¼: boolean } => {
  const ì²œê°„ = gapja[0];
  const ì§€ì§€ = gapja[1];
  const dayOfWeek = date.getDay();
  
  // ê°„ë‹¨í•œ ê¸¸ì¼ ê·œì¹™ (ì‹¤ì œë¡œëŠ” ë” ë³µì¡í•œ ê³„ì‚° í•„ìš”)
  const ê¸¸ì¼ì¡°ê±´ = [
    ì²œê°„ === 'ê°‘' && dayOfWeek === 1, // ê°‘ì¼ + ì›”ìš”ì¼
    ì²œê°„ === 'ì„' && dayOfWeek === 2, // ì„ì¼ + í™”ìš”ì¼
    ì§€ì§€ === 'ì' && dayOfWeek === 0, // ìì¼ + ì¼ìš”ì¼
    ì§€ì§€ === 'ì¶•' && dayOfWeek === 6, // ì¶•ì¼ + í† ìš”ì¼
  ];
  
  const í‰ì¼ì¡°ê±´ = [
    ì²œê°„ === 'ë¬´' && dayOfWeek === 4, // ë¬´ì¼ + ëª©ìš”ì¼
    ì²œê°„ === 'ê¸°' && dayOfWeek === 5, // ê¸°ì¼ + ê¸ˆìš”ì¼
    ì§€ì§€ === 'ì‚¬' && dayOfWeek === 3, // ì‚¬ì¼ + ìˆ˜ìš”ì¼
  ];
  
  return {
    ê¸¸ì¼: ê¸¸ì¼ì¡°ê±´.some(condition => condition),
    í‰ì¼: í‰ì¼ì¡°ê±´.some(condition => condition)
  };
};

// ì ˆê¸° ë°ì´í„° (2025ë…„ ê¸°ì¤€)
export const ì ˆê¸°2025 = [
  { ì´ë¦„: 'ì†Œí•œ', ë‚ ì§œ: new Date(2025, 0, 5) },
  { ì´ë¦„: 'ëŒ€í•œ', ë‚ ì§œ: new Date(2025, 0, 20) },
  { ì´ë¦„: 'ì…ì¶˜', ë‚ ì§œ: new Date(2025, 1, 3) },
  { ì´ë¦„: 'ìš°ìˆ˜', ë‚ ì§œ: new Date(2025, 1, 18) },
  { ì´ë¦„: 'ê²½ì¹©', ë‚ ì§œ: new Date(2025, 2, 5) },
  { ì´ë¦„: 'ì¶˜ë¶„', ë‚ ì§œ: new Date(2025, 2, 20) },
  { ì´ë¦„: 'ì²­ëª…', ë‚ ì§œ: new Date(2025, 3, 4) },
  { ì´ë¦„: 'ê³¡ìš°', ë‚ ì§œ: new Date(2025, 3, 19) },
  { ì´ë¦„: 'ì…í•˜', ë‚ ì§œ: new Date(2025, 4, 5) },
  { ì´ë¦„: 'ì†Œë§Œ', ë‚ ì§œ: new Date(2025, 4, 20) },
  { ì´ë¦„: 'ë§ì¢…', ë‚ ì§œ: new Date(2025, 5, 5) },
  { ì´ë¦„: 'í•˜ì§€', ë‚ ì§œ: new Date(2025, 5, 21) },
  { ì´ë¦„: 'ì†Œì„œ', ë‚ ì§œ: new Date(2025, 6, 6) },
  { ì´ë¦„: 'ëŒ€ì„œ', ë‚ ì§œ: new Date(2025, 6, 22) },
  { ì´ë¦„: 'ì…ì¶”', ë‚ ì§œ: new Date(2025, 7, 7) },
  { ì´ë¦„: 'ì²˜ì„œ', ë‚ ì§œ: new Date(2025, 7, 22) },
  { ì´ë¦„: 'ë°±ë¡œ', ë‚ ì§œ: new Date(2025, 8, 7) },
  { ì´ë¦„: 'ì¶”ë¶„', ë‚ ì§œ: new Date(2025, 8, 22) },
  { ì´ë¦„: 'í•œë¡œ', ë‚ ì§œ: new Date(2025, 9, 8) },
  { ì´ë¦„: 'ìƒê°•', ë‚ ì§œ: new Date(2025, 9, 23) },
  { ì´ë¦„: 'ì…ë™', ë‚ ì§œ: new Date(2025, 10, 7) },
  { ì´ë¦„: 'ì†Œì„¤', ë‚ ì§œ: new Date(2025, 10, 22) },
  { ì´ë¦„: 'ëŒ€ì„¤', ë‚ ì§œ: new Date(2025, 11, 7) },
  { ì´ë¦„: 'ë™ì§€', ë‚ ì§œ: new Date(2025, 11, 21) }
];

// ì ˆê¸° ì°¾ê¸°
export const getì ˆê¸° = (date: Date): string | null => {
  const í•´ë‹¹ì ˆê¸° = ì ˆê¸°2025.find(ì ˆê¸° => {
    const diff = Math.abs(date.getTime() - ì ˆê¸°.ë‚ ì§œ.getTime());
    return diff < 24 * 60 * 60 * 1000; // 1ì¼ ì´ë‚´
  });
  return í•´ë‹¹ì ˆê¸°?.ì´ë¦„ || null;
};

// ìš´ì„¸ ì ìˆ˜ ê³„ì‚° (1-5)
export const getìš´ì„¸ì ìˆ˜ = (gapja: string, date: Date): number => {
  const ì²œê°„ = gapja[0];
  const ì§€ì§€ = gapja[1];
  const ì˜¤í–‰ = ì˜¤í–‰ë§¤í•‘[ì²œê°„];
  const dayOfWeek = date.getDay();
  const day = date.getDate();
  
  let ì ìˆ˜ = 3; // ê¸°ë³¸ ì ìˆ˜
  
  // ì˜¤í–‰ë³„ ìš”ì¼ ë³´ì •
  const ì˜¤í–‰ìš”ì¼ë³´ì •: Record<string, number[]> = {
    'ëª©': [1, 4], // ì›”, ëª©
    'í™”': [2], // í™”
    'í† ': [6], // í† 
    'ê¸ˆ': [5], // ê¸ˆ
    'ìˆ˜': [0, 3] // ì¼, ìˆ˜
  };
  
  if (ì˜¤í–‰ìš”ì¼ë³´ì •[ì˜¤í–‰]?.includes(dayOfWeek)) {
    ì ìˆ˜ += 1;
  }
  
  // ë‚ ì§œë³„ ë³´ì •
  if (day % 6 === 0) ì ìˆ˜ += 1; // 6ì˜ ë°°ìˆ˜
  if (day === 8 || day === 18 || day === 28) ì ìˆ˜ += 1; // ë°œìŒì´ ì¢‹ì€ ë‚ 
  
  // ì§€ì§€ë³„ ë³´ì •
  const ì§€ì§€ë³´ì •: Record<string, number> = {
    'ìš©': 1, 'í˜¸ë‘ì´': 1, 'ë§': 1, 'ë‹­': 1, // í™œë™ì 
    'ì¥': -1, 'ë±€': -1 // ì¡°ìš©í•œ
  };
  
  const ë  = ë ë™ë¬¼[ì§€ì§€];
  if (ë ) {
    ì ìˆ˜ += ì§€ì§€ë³´ì •[ë ] || 0;
  }
  
  return Math.max(1, Math.min(5, ì ìˆ˜));
};

// íŠ¹ì´ì‚¬í•­ ìƒì„±
export const getíŠ¹ì´ì‚¬í•­ = (date: Date, gapja: string): string[] => {
  const íŠ¹ì´ì‚¬í•­: string[] = [];
  const ì²œê°„ = gapja[0];
  const ì§€ì§€ = gapja[1];
  const ë  = ë ë™ë¬¼[ì§€ì§€];
  const dayOfWeek = date.getDay();
  
  if (isì†ì—†ëŠ”ë‚ (date)) {
    íŠ¹ì´ì‚¬í•­.push('ğŸ‘» ì†ì—†ëŠ”ë‚ ');
  }
  
  const { ê¸¸ì¼, í‰ì¼ } = getê¸¸í‰(gapja, date);
  if (ê¸¸ì¼) íŠ¹ì´ì‚¬í•­.push('âœ¨ ê¸¸ì¼');
  if (í‰ì¼) íŠ¹ì´ì‚¬í•­.push('âš ï¸ í‰ì¼');
  
  const ì ˆê¸° = getì ˆê¸°(date);
  if (ì ˆê¸°) íŠ¹ì´ì‚¬í•­.push(`ğŸŒ¸ ${ì ˆê¸°}`);
  
  // íŠ¹ë³„í•œ ì¡°í•©
  if (ì²œê°„ === 'ê°‘' && ì§€ì§€ === 'ì') {
    íŠ¹ì´ì‚¬í•­.push('ğŸŒŸ ê°‘ìì¼ (ìƒˆë¡œìš´ ì‹œì‘)');
  }
  
  if (dayOfWeek === 0) {
    íŠ¹ì´ì‚¬í•­.push('â˜€ï¸ ì¼ìš”ì¼ (íœ´ì‹)');
  }
  
  if (ë  === 'ìš©') {
    íŠ¹ì´ì‚¬í•­.push('ğŸ‰ ìš©ì˜ ê¸°ìš´ (ê°•ìš´)');
  }
  
  return íŠ¹ì´ì‚¬í•­;
};

// ìº˜ë¦°ë” ë°ì´í„° ìƒì„±
export const generateCalendarMonth = (year: number, month: number): CalendarDate[] => {
  const daysInMonth = new Date(year, month, 0).getDate();
  const calendarDates: CalendarDate[] = [];
  
  for (let day = 1; day <= daysInMonth; day++) {
    const date = new Date(year, month - 1, day);
    const gapja = get60ê°‘ì(date);
    const ì²œê°„ = gapja[0];
    const ì§€ì§€ = gapja[1];
    const ë  = ë ë™ë¬¼[ì§€ì§€];
    const ì˜¤í–‰ = ì˜¤í–‰ë§¤í•‘[ì²œê°„];
    const { ê¸¸ì¼, í‰ì¼ } = getê¸¸í‰(gapja, date);
    const ì†ì—†ëŠ”ë‚  = isì†ì—†ëŠ”ë‚ (date);
    const ì ˆê¸° = getì ˆê¸°(date);
    const ìš´ì„¸ì ìˆ˜ = getìš´ì„¸ì ìˆ˜(gapja, date);
    const íŠ¹ì´ì‚¬í•­ = getíŠ¹ì´ì‚¬í•­(date, gapja);
    
    calendarDates.push({
      date,
      lunarDate: getìŒë ¥ë³€í™˜(date), // ê·¼ì‚¬ ìŒë ¥ ê³„ì‚°
      gapja,
      zodiac: ë ,
      element: ì˜¤í–‰,
      sonEobNeunNal: ì†ì—†ëŠ”ë‚ ,
      gilil: ê¸¸ì¼,
      í‰ì¼,
      ì ˆê¸°,
      ìš´ì„¸ì ìˆ˜,
      íŠ¹ì´ì‚¬í•­
    });
  }
  
  return calendarDates;
};

// ì›”ë³„ ìš´ì„¸ ë©”ì‹œì§€ ìƒì„±
export const getMonthlyFortune = (year: number, month: number): MonthlyFortune => {
  const dates = generateCalendarMonth(year, month);
  
  const bestDates = dates
    .filter(d => d.ìš´ì„¸ì ìˆ˜ >= 4)
    .sort((a, b) => b.ìš´ì„¸ì ìˆ˜ - a.ìš´ì„¸ì ìˆ˜)
    .slice(0, 5);
    
  const worstDates = dates
    .filter(d => d.ìš´ì„¸ì ìˆ˜ <= 2)
    .sort((a, b) => a.ìš´ì„¸ì ìˆ˜ - b.ìš´ì„¸ì ìˆ˜)
    .slice(0, 3);
    
  const importantDates = dates.filter(d => 
    d.ì ˆê¸° || d.gilil || d.íŠ¹ì´ì‚¬í•­.length > 1
  );
  
  const monthlyMessages = [
    'ìƒˆí•´ë¥¼ ë§ì´í•˜ëŠ” í¬ë§ì°¬ ë‹¬ì…ë‹ˆë‹¤.',
    'ì‚¬ë‘ì˜ ê¸°ìš´ì´ ê°€ë“í•œ ë‹¬ì…ë‹ˆë‹¤.',
    'ìƒˆë¡œìš´ ì‹œì‘ê³¼ ì„±ì¥ì˜ ë‹¬ì…ë‹ˆë‹¤.',
    'ì•ˆì •ê³¼ ì¡°í™”ë¥¼ ì°¾ëŠ” ë‹¬ì…ë‹ˆë‹¤.',
    'í™œë°œí•œ í™œë™ê³¼ ì„±ì·¨ì˜ ë‹¬ì…ë‹ˆë‹¤.',
    'ê· í˜•ê³¼ í™”í•©ì´ ì¤‘ìš”í•œ ë‹¬ì…ë‹ˆë‹¤.',
    'ì—¬ë¦„ì˜ í™œê¸°ê°€ ë„˜ì¹˜ëŠ” ë‹¬ì…ë‹ˆë‹¤.',
    'í’ì„±í•œ ìˆ˜í™•ì„ ê¸°ëŒ€í•˜ëŠ” ë‹¬ì…ë‹ˆë‹¤.',
    'ë³€í™”ì™€ ì ì‘ì˜ ì§€í˜œê°€ í•„ìš”í•œ ë‹¬ì…ë‹ˆë‹¤.',
    'ê¹Šì´ ìˆëŠ” ì„±ì°°ê³¼ ì¤€ë¹„ì˜ ë‹¬ì…ë‹ˆë‹¤.',
    'ë§ˆë¬´ë¦¬ì™€ ì •ë¦¬ê°€ ì¤‘ìš”í•œ ë‹¬ì…ë‹ˆë‹¤.',
    'í•œ í•´ë¥¼ ëŒì•„ë³´ë©° ê°ì‚¬í•˜ëŠ” ë‹¬ì…ë‹ˆë‹¤.'
  ];
  
  return {
    month,
    year,
    bestDates,
    worstDates,
    importantDates,
    monthlyMessage: monthlyMessages[month - 1]
  };
};

// ì˜¤ëŠ˜ì˜ ìš´ì„¸ ì •ë³´
export const getTodayFortune = (): CalendarDate => {
  const today = new Date();
  const year = today.getFullYear();
  const month = today.getMonth() + 1;
  const day = today.getDate();
  
  const monthData = generateCalendarMonth(year, month);
  return monthData.find(d => d.date.getDate() === day) || monthData[0];
};

export default {
  generateCalendarMonth,
  getMonthlyFortune,
  getTodayFortune,
  get60ê°‘ì,
  getìŒë ¥ë³€í™˜,
  isì†ì—†ëŠ”ë‚ ,
  getê¸¸í‰,
  getì ˆê¸°,
  getìš´ì„¸ì ìˆ˜,
  getíŠ¹ì´ì‚¬í•­,
  ì²œê°„,
  ì§€ì§€,
  ë ë™ë¬¼,
  ì˜¤í–‰ë§¤í•‘
};