name: HEAL7 Legacy Build (Deprecated)

# ‚ö†Ô∏è DEPRECATED: This workflow is replaced by service-specific workflows
# Use the following instead:
# - frontend-build-deploy.yml
# - backend-services-build.yml  
# - service-deployment.yml
# - service-selector.yml

on:
  workflow_dispatch:
    inputs:
      legacy_mode:
        description: 'Use legacy build (not recommended)'
        required: true
        default: 'false'
        type: choice
        options:
        - 'false'
        - 'true'

jobs:
  deprecation-notice:
    runs-on: ubuntu-latest
    steps:
    - name: Deprecation Warning
      run: |
        echo "‚ö†Ô∏è  LEGACY WORKFLOW DEPRECATION NOTICE"
        echo "====================================="
        echo ""
        echo "This workflow has been replaced by:"
        echo "üé® frontend-build-deploy.yml - Frontend builds"
        echo "üéº backend-services-build.yml - Service-specific builds"  
        echo "üöÄ service-deployment.yml - Orchestrated deployment"
        echo "üéØ service-selector.yml - Manual service selection"
        echo ""
        echo "Please use the new service-specific workflows instead."
        echo "Legacy mode: ${{ github.event.inputs.legacy_mode }}"
        
        if [[ "${{ github.event.inputs.legacy_mode }}" == "true" ]]; then
          echo "‚ö†Ô∏è Legacy mode enabled - proceed with caution"
        else
          echo "‚ùå Legacy build blocked - use new workflows"
          exit 1
        fi

  legacy-build:
    needs: deprecation-notice
    runs-on: ubuntu-latest
    if: github.event.inputs.legacy_mode == 'true'
    steps:
    - uses: actions/checkout@v4
    
    - name: Legacy build simulation
      run: |
        echo "üèóÔ∏è Running legacy build simulation..."
        echo "‚úÖ Legacy build completed (simulation only)"
        echo ""
        echo "üëâ Migrate to new workflows:"
        echo "   gh workflow run frontend-build-deploy.yml"
        echo "   gh workflow run backend-services-build.yml"