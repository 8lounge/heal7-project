# 키워드 매트릭스 3D 시각화 기능 명세서

## 📋 기본 정보
- **기능명**: 3D 키워드 매트릭스 시각화 시스템
- **버전**: v13 (상호작용 개선)
- **우선순위**: High
- **예상 개발 기간**: 완성됨 (재사용 모듈)
- **담당 에이전트**: UI Designer Agent + Data Visualization Specialist

## 🎯 개요

### 목적 (Purpose)
- **442개 한글 키워드**를 3D 지구본 형태로 시각화
- **키워드 간 연결 관계**와 **상태별 색상 구분**을 통한 직관적 인사이트 제공
- **인터랙티브한 탐색 환경**으로 복잡한 데이터를 이해하기 쉽게 표현

### 사용자 스토리 (User Story)  
```
사용자로서 나는 복잡한 키워드 네트워크를 3D 환경에서 직관적으로 탐색하고,
특정 키워드와 연관된 다른 키워드들을 시각적으로 파악하며,
상태별 색상을 통해 키워드의 현재 상황을 한눈에 이해하고 싶다.
```

### 비즈니스 가치 (Business Value)
- **복잡한 데이터의 직관적 이해**: 442개 키워드 관계를 한눈에 파악
- **인터랙티브 분석**: 사용자 맞춤형 탐색을 통한 깊이 있는 인사이트
- **실시간 상태 모니터링**: 키워드별 상태를 색상으로 즉시 확인

## 📋 상세 요구사항

### 기능적 요구사항 (Functional Requirements)

#### 1. **3D 시각화 엔진**
- Three.js 기반 WebGL 렌더링
- 지구본 형태 키워드 배치 (구체 표면 분산)
- 실시간 3D 회전 및 확대/축소
- 부드러운 애니메이션 전환 (GSAP)

#### 2. **키워드 데이터 관리**
- **메인 키워드**: 60개 (굵은 글씨, 큰 노드)
- **서브 키워드**: 382개 (일반 글씨, 작은 노드)  
- **계층적 연결**: 메인 키워드 → 서브 키워드 관계
- **동적 상태 할당**: 각 키워드별 상태 값 (-1 ~ 1)

#### 3. **상태 시각화 시스템**
- **긍정 상태**: 초록색 (#4ade80) - 0.5 이상
- **중립 상태**: 노란색 (#facc15) - -0.2 ~ 0.5
- **부정 상태**: 빨간색 (#f87171) - -1 ~ -0.2  
- **비활성 상태**: 회색 (#6b7280) - -1 미만

#### 4. **인터랙션 기능**
- **마우스 호버**: 키워드 그룹 하이라이트
- **클릭 포커스**: 특정 키워드 그룹으로 카메라 이동
- **키워드 검색**: 실시간 검색 및 포커스
- **컨트롤 패널**: 회전 속도, 텍스트 크기, 줌 조절

### 비기능적 요구사항 (Non-functional Requirements)
- **성능**: 60FPS 유지 (442개 노드 + 연결선 렌더링)
- **반응성**: 모든 상호작용 200ms 이내 응답
- **호환성**: 모던 브라우저 지원 (Chrome, Firefox, Safari, Edge)
- **접근성**: 키보드 내비게이션 지원

## 🔄 사용자 플로우 (User Flow)

### 기본 탐색 플로우
1. **초기 로딩**: 3D 지구본 형태로 키워드 매트릭스 표시
2. **자동 회전**: 전체 매트릭스를 회전시켜 개요 파악
3. **호버 탐색**: 마우스를 키워드 위에 올려 연결 관계 확인
4. **클릭 포커스**: 특정 키워드 클릭으로 상세 그룹 탐색
5. **검색 활용**: 키워드 이름으로 직접 검색 및 이동

### 상세 분석 플로우
1. **키워드 검색**: 검색창에 키워드 입력
2. **자동 포커스**: 해당 키워드로 카메라 이동
3. **연결 분석**: 연결된 키워드들 하이라이트 표시
4. **상태 확인**: 색상을 통한 상태 정보 파악
5. **추가 탐색**: 연결된 다른 키워드로 확장 탐색

## 🎨 UI/UX 요구사항

### 화면 구성
- **메인 3D 뷰**: 전체 화면 키워드 매트릭스
- **검색 패널**: 우상단 키워드 검색 인터페이스
- **컨트롤 패널**: 좌상단 상호작용 컨트롤
- **범례**: 좌하단 색상 의미 설명

### 시각적 디자인
- **배경**: 다크 테마 (#0c0a09)
- **UI 오버레이**: 반투명 글래스 효과
- **키워드 라벨**: 그림자가 있는 흰색 텍스트
- **노드 재질**: 광택이 있는 구체 (Phong 재질)

### 반응형 디자인
- **데스크탑**: 최적화된 마우스 인터랙션
- **태블릿**: 터치 제스처 지원
- **모바일**: 단순화된 컨트롤 인터페이스

## 🔧 기술적 요구사항

### 핵심 라이브러리
```javascript
- Three.js v0.160.0 (3D 렌더링)
- CSS2DRenderer (라벨 오버레이)  
- OrbitControls (카메라 조작)
- GSAP v3.12.2 (애니메이션)
- Tailwind CSS (UI 스타일링)
- Noto Sans KR (한글 폰트)
```

### 렌더링 설정
```javascript
- WebGL 안티앨리어싱 활성화
- 디바이스 픽셀 비율 적용
- 동적 해상도 조정 (창 크기 변경 시)
- 투명도 지원 활성화
```

### 성능 최적화
```javascript
- Frustum Culling (화면 밖 객체 제거)
- LOD (Level of Detail) 시스템 적용
- 인스턴스 렌더링 활용
- 텍스처 아틀라스 사용
```

## 📊 데이터 명세

### 입력 데이터 구조
```javascript
const keywordData = {
  '메인키워드': ['서브키워드1', '서브키워드2', '서브키워드3'],
  '논리': ['분석적사고', '추론능력', '문해력', '판단력', '지성'],
  '창의력': ['상상력', '아이디어', '시각적사고', '융통성', '혁신지향']
  // ... 총 60개 메인 키워드와 382개 서브 키워드
};
```

### 키워드 상태 데이터
```javascript
const keywordStates = {
  '논리': 0.8,      // 긍정 상태
  '창의력': 0.2,    // 중립 상태  
  '스트레스': -0.6, // 부정 상태
  '불안': -1.2      // 비활성 상태
};
```

### 출력 3D 객체 구조
```javascript
const nodeStructure = {
  id: 'keyword_name',           // 키워드 식별자
  position: Vector3,            // 3D 공간 위치
  connections: Set,             // 연결된 노드들
  state: Float,                 // 상태 값 (-1 ~ 1)
  color: Color,                 // 상태별 색상
  isMainKeyword: Boolean,       // 메인 키워드 여부
  label: CSS2DObject           // 텍스트 라벨
};
```

## ✅ 검수 기준 (Acceptance Criteria)

### 시각화 기준
- [ ] 442개 키워드가 3D 지구본 형태로 균등하게 배치됨
- [ ] 키워드 간 연결선이 정확히 표시됨
- [ ] 4가지 상태 색상이 올바르게 적용됨
- [ ] 메인/서브 키워드 구분이 명확함

### 상호작용 기준  
- [ ] 마우스 호버 시 연결된 키워드 그룹이 하이라이트됨
- [ ] 키워드 클릭 시 해당 그룹으로 부드럽게 포커스됨
- [ ] 검색 기능이 정확히 작동함
- [ ] 모든 컨트롤 버튼이 예상대로 동작함

### 성능 기준
- [ ] 60FPS 이상 유지 (Chrome DevTools 측정)
- [ ] 메모리 사용량 500MB 이하
- [ ] 초기 로딩 시간 3초 이내
- [ ] 상호작용 응답 시간 200ms 이내

### 호환성 기준
- [ ] Chrome 90+ 완전 지원
- [ ] Firefox 88+ 완전 지원  
- [ ] Safari 14+ 완전 지원
- [ ] Edge 90+ 완전 지원

## 🧪 테스트 케이스

### 정상 케이스
1. **전체 로딩**: 모든 키워드가 올바른 위치에 표시됨
2. **키워드 검색**: "논리" 검색 시 해당 키워드로 포커스
3. **호버 인터랙션**: 키워드 호버 시 연결 그룹 하이라이트
4. **클릭 포커스**: 키워드 클릭 시 카메라 이동 애니메이션
5. **컨트롤 조작**: 회전 속도, 텍스트 크기 조절 동작

### 예외 케이스
1. **존재하지 않는 키워드 검색**: 검색창 흔들림 애니메이션
2. **네트워크 로딩 실패**: 로딩 에러 메시지 표시
3. **WebGL 미지원 브라우저**: 대체 2D 인터페이스 제공
4. **메모리 부족**: 성능 저하 시 품질 자동 조정

## 🔗 의존성

### 선행 작업
- 키워드 데이터 수집 및 분류 완료
- 키워드 간 연결 관계 정의 완료
- 상태 값 계산 알고리즘 구현

### 연관 기능  
- 키워드 분석 엔진
- 사용자 개인화 시스템
- 데이터 내보내기 기능

## 📅 사용법

### 기본 사용법
```html
<!-- 파일을 웹 서버에서 실행 -->
1. KeywordMatrix3D.complete.html 파일을 웹 서버에 배치
2. 브라우저에서 파일 접근
3. 자동으로 3D 매트릭스 로딩 및 표시
4. 마우스/키보드로 인터랙션 시작
```

### 커스터마이징
```javascript
// 키워드 데이터 수정
const keywordData = {
  '사용자정의키워드': ['연관키워드1', '연관키워드2']
};

// 색상 테마 변경
function getStateColor(state) {
  // 사용자 정의 색상 로직
}

// 애니메이션 속도 조절
controls.autoRotateSpeed = 1.0; // 기본값: 0.5
```

---

**🎯 완성도**: 100% (즉시 사용 가능한 완성 모듈)
**📁 파일 위치**: `/home/ubuntu/CORE/sample-codes/react-components/KeywordMatrix3D.complete.html`
**📅 작성일**: 2025-08-18
**🔄 버전**: v13 (상호작용 개선)